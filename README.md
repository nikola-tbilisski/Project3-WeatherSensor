<a name="br2"></a> 

REST API

REST API сервисы нужны практически в любой сфере деятельности. ꢀ

Большинство программистов по всему миру преимущественно

занимаются тем, что создают REST API сервисы различных уровней

сложности.ꢀ

REST API позволяет принимать данные с любого устройства,

которое имеет выход в интернет (сенсор, робот, весы, конвейер,

сканер штрих кодов, мобильный телефон, ... , что угодно) и как-то

их обрабатывать.ꢀ

Мы можем сами посылать запросы к сторонним REST API сервисам

(с помощью RestTemplate или WebClient - новый класс, который

позволяет совершать асинхронные запросы) либо создавать свой

REST API сервис, который может принимать запросы от клиентов.



<a name="br3"></a> 

Комментарии к заданию

•

Задание специально написано человеческим языком и не

содержит технических деталей реализации. Это максимально

приближено к условиям настоящей работы, когда менеджер

сообщает вам бизнес требования и ожидает, что вы сами

переведете их в техническую реализацию.

•

•

Ожидается, что в случае непредвиденных ошибок, вы будете их

гуглить и исправлять. Эффективно гуглить - один из главных

навыков программиста.

Также ожидается, что вы будете задавать вопросы в чате и

обсуждать решение с другими людьми.



<a name="br4"></a> 

Задача

Представьте, что вы приобрели метеорологический датчик (для

простоты дальше будем называть его просто "сенсор"). Этот датчик

измеряет температуру окружающего воздуха и может определять,

идет дождь или нет.ꢀ

Обычно, эти сенсоры выглядят вот так:

Мы хотим получать данные с сенсора и сохранять их в БД, чтобы

далее их анализировать -> Надо создать REST API для этого!



<a name="br5"></a> 

Задача

Создать REST API сервис, который будет принимать данные от

"сенсора".

Данные

REST API

Принимает данные от

"сенсора" и сохраняет их в

Измеряет температуру

воздуха и определяет,

идет дождь или нет

БД

Примерное время выполнения проекта: 6-9 часов



<a name="br6"></a> 

Задача

Создать REST API сервис, который будет принимать данные от

"сенсора".

Данные

REST API

Сенсор имеет доступ в интернет, поэтому может отправлять HTTP запросы к

нашему серверу.ꢀ

Каждый раз, когда он будет производить измерение, он будет слать HTTP

запрос с данными в формате JSON на наш сервер - для этого в реальной жизни

мы бы указали устройству IP адрес того компьютера, где мы запускаем Spring

REST API приложение. После этого, на нашем компьютере мы сможем

принимать запросы от сенсора.



<a name="br7"></a> 

Задача

Так как реального сенсора у нас нет, в качестве сенсора будет

выступать наш собственный компьютер!ꢀ

То есть на нашем компьютере будет работать сервер со Spring

REST API приложением, и наш же компьютер будет слать HTTP

запросы к Spring приложению так, как будто он и есть "сенсор".

Для того, чтобы отправлять запросы к REST API приложению, мы

будем использовать знакомый нам RestTemplate, который мы уже

использовали в этом курсе для того, чтобы слать запросы к

сторонним REST API сервисам.

Данные

REST API

Java код

"Сенсор"

Сервер



<a name="br8"></a> 

Задача

Более формально

Проект делится на 2 части:

\1) Создание REST API приложения с помощью Spring REST (по

аналогии с тем приложением, которое мы создавали на

уроках)ꢀ

\2) Создание Java клиента, который бы отправлял данные на

REST API приложение - с помощью класса RestTemplate.



<a name="br9"></a> 

Задача (I часть)

В качестве шаблона используйте проект FirstRestApp ([https://](https://github.com/NeilAlishev/SpringCourse/tree/master/FirstRestApp)

[github.com/NeilAlishev/SpringCourse/tree/master/FirstRestApp](https://github.com/NeilAlishev/SpringCourse/tree/master/FirstRestApp)[)](https://github.com/NeilAlishev/SpringCourse/tree/master/FirstRestApp)[ꢀ](https://github.com/NeilAlishev/SpringCourse/tree/master/FirstRestApp)

В этот раз я не буду описывать задание строго - какие модели,

контроллеры и сервисы создавать. Техническая реализация

полностью за вами, я лишь опишу здесь бизнес требования к

вашему REST API.

Помните, что нет единственно верного варианта решения задачи.

Не бойтесь творить. Этот проект даст вам почувствовать уровень

свободы принятия решений на позиции middle-разработчика.ꢀ

По любым вопросам пишите в чат.ꢀ

После того, как вы реализуете свой вариант приложения, вы

сможете сравнить его с моим, посмотрев мой видеоразбор.



<a name="br10"></a> 

ТЗ к REST API

Описывается адрес API, данные которые передаются при запросе на

этот адрес и тот функционал, который должен предоставляться в

результате запроса на этот адрес

<sup>•</sup>POST /sensors/registration

Регистрирует новый сенсор в системе. Другими словами, просто добавляет новый

сенсор в таблицу сенсоров в БД. Как видно из JSON'а - у сенсоров есть только одно

поле - название.ꢀ

Вы должны помнить о правилах хорошего кода и использовать DTO для входящего

объекта - сенсора.ꢀ

Также, вы должны валидировать то, что сенсора с таким названием еще нет в БД

(вспоминайте Spring Validator). Если сенсор с таким названием есть в БД - возвращать

клиенту сообщение с ошибкой (вспоминайте урок про это).ꢀ

Также, если название сенсора пустое или содержит менее 3 или более 30 символов,

клиенту должно возвращаться сообщение с ошибкой.



<a name="br11"></a> 

<sup>•</sup>POST /measurements/add

Добавляет новое измерение. Это тот адрес, куда настоящий сенсор посылал бы свои данные.

Вещественное поле "value" содержит значение температуры воздуха, булево поле "raining" содержит

значение true/false в зависимости от того, зарегистрировал ли сенсор дождь или нет. Помимо этого, в

этом запросе передается сам объект сенсора, который получил и отправляет эти "измерения".ꢀ

Значения температуры воздуха, дождя должны сохранятся в таблице в БД. Также, в каждой строке этой

таблицы должно содержаться название того сенсора, который прислал эти измерения. То есть

сущность "Измерение" имеет связь с сущностью "Сенсор" (вспоминайте отношения в БД и как их

выстраивать в Java классах с помощью Hibernate).ꢀ

Все поля у измерения должны валидироваться.ꢀ

Значение "value" должно быть не пустым и находиться в диапазоне от -100 до 100.ꢀ

Значение "raining" должно быть не пустым.ꢀ

Значение "sensor" должно быть не пустым. При этом, название сенсора должно валидироваться в БД.

Сенсор с таким названием должен быть зарегистрирован в системе (должен быть в БД).ꢀ

Если такого сенсора нет в БД - выдавать ошибку. Также, не забывайте про DTO.ꢀ

На сервере, у измерения должно выставляться текущее время, оно должно сохраняться в БД.



<a name="br12"></a> 

<sup>•</sup>GET /measurements

Возвращает все измерения из БД

<sup>•</sup>GET /measurements/rainyDaysCount

Возвращает количество дождливых дней из БД

Всего в приложении должно быть 4 адреса:ꢀ

Регистрация сенсораꢀ

\1)

\2)

\3)

\4)

Добавление измерения от сенсораꢀ

Получение всех измеренийꢀ

Получение количества дождливых дней

После того, как REST приложение будет готово, необходимо

перейти ко второй части задания и реализовать клиента.



<a name="br13"></a> 

Задача (II часть)

Используйте класс RestTemplate, чтобы отправить 1000 запросов со

случайными температурами и "дождями" на адрес:ꢀ

POST /measurements/add

Не забудьте перед этим зарегистрировать новый сенсор (тоже с

помощью запроса).ꢀ

После этого, используйте RestTemplate, чтобы получить эти 1000

измерений с сервера, отправив GETзапрос на адрес:ꢀ

/measurements

Задание со \* (необязательное):ꢀ

Постройте график температур, получив 1000 температур с сервера.ꢀ

Для построения графика можно использовать библиотеку xchart



<a name="br14"></a> 

Должно быть сложно и не все должно сразу получаться - в этом и

есть суть этого проекта.ꢀ

Задавайте вопросы в чат.

Удачи!
